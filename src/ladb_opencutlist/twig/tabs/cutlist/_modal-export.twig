{% extends 'core/_modal.twig' %}

{% set id = 'ladb_cutlist_modal_export' %}
{% set title = 'tab.cutlist.export.title'|i18next %}
{% if group and group.material_type != 0 %} {# 0 = TYPE_UNKNOWN #}
    {% set title = title~'<small class="ladb-horizontal-left-separator">'~group.material_name|escape('html')~(group.std_dimension ? ' / '~group.std_dimension : '')~'</small>' %}
{% endif %}
{% set noDefaultClose = true %}

{% block headerToolsInner %}
    {% include 'components/_widget-preset.twig' %}
    <button class="btn btn-default btn-xs" data-help-page="cutlist.export"><i class="ladb-opencutlist-icon-help"></i> {{ 'default.help'|i18next }}</button>
{% endblock %}

{% block headerInner %}
    {{ parent() }}
    <div class="ladb-radios-group">
        <label>{{ 'tab.cutlist.export.option_source'|i18next }}</label>
        <div>
            <div class="btn-group btn-group-justified" data-toggle="buttons">
                <label class="btn btn-radio">
                    <input type="radio" name="ladb_radios_source" value="0">{{ 'tab.cutlist.export.option_source_summary'|i18next }}
                </label>
                <label class="btn btn-radio">
                    <input type="radio" name="ladb_radios_source" value="1">{{ 'tab.cutlist.export.option_source_cutlist'|i18next }}
                </label>
                <label class="btn btn-radio">
                    <input type="radio" name="ladb_radios_source" value="2">{{ 'tab.cutlist.export.option_source_instances_list'|i18next }}
                </label>
            </div>
        </div>
    </div>
    <ul class="nav nav-tabs nav-justified" role="tablist">
        <li role="presentation"{% if tab == 'customize' %} class="active"{% endif %}><a href="#tab_export_options_customize" role="tab" data-toggle="tab"><i class="ladb-opencutlist-icon-settings"></i> {{ 'tab.cutlist.export.options_customize'|i18next }}</a></li>
        <li role="presentation"{% if tab == 'general' %} class="active"{% endif %}><a href="#tab_export_options_general" role="tab" data-toggle="tab">{{ 'tab.cutlist.export.options'|i18next }}</a></li>
    </ul>
{% endblock %}

{% block bodyInner %}
    <div class="tab-content">
        {% if isGroupSelection %}
            <div class="alert alert-info text-center">{{ 'tab.cutlist.export.warning.is_group_selection'|i18next }}</div>
        {% endif %}
        {% if isPartSelection %}
            <div class="alert alert-info text-center">{{ 'tab.cutlist.export.warning.is_part_selection'|i18next }}</div>
        {% endif %}
        <div class="row">
            <div class="col-xs-push-1 col-xs-10">
                {{ 'tab.cutlist.export.info_0'|i18next }}
            </div>
        </div>
        <hr>
        <div role="tabpanel" class="tab-pane{% if tab == 'customize' %} active{% endif %}" id="tab_export_options_customize">
            <div id="ladb_cutlist_export_editor_summary" class="ladb-editor-export" style="display: none;"></div>
            <div id="ladb_cutlist_export_editor_cutlist" class="ladb-editor-export" style="display: none;"></div>
            <div id="ladb_cutlist_export_editor_instances_list" class="ladb-editor-export" style="display: none;"></div>
        </div>
        <div role="tabpanel" class="tab-pane{% if tab == 'general' %} active{% endif %}" id="tab_export_options_general">
            <div class="form form-horizontal">
                <div class="form-group">
                    <label class="control-label col-xs-4">{{ 'tab.cutlist.export.option_format'|i18next }}</label>
                    <div class="col-xs-6">
                        <select class="form-control" id="ladb_cutlist_export_select_format">
                            <option value="csv" data-content="CSV"></option>
                            <option value="xlsx" data-content="XLSX"></option>
                        </select>
                    </div>
                </div>
                <div class="form-group form-group-csv">
                    <label class="control-label col-xs-4">{{ 'tab.cutlist.export.option_csv_col_sep'|i18next }}</label>
                    <div class="col-xs-6">
                        <select class="form-control" id="ladb_cutlist_export_select_csv_col_sep">
                            <option value="0" data-content="{{ 'tab.cutlist.export.option_csv_col_sep_tab'|i18next }}">0</option>
                            <option value="1" data-content="{{ 'tab.cutlist.export.option_csv_col_sep_comma'|i18next }}">1</option>
                            <option value="2" data-content="{{ 'tab.cutlist.export.option_csv_col_sep_semicolon'|i18next }}">2</option>
                        </select>
                    </div>
                </div>
                <div class="form-group form-group-csv">
                    <label class="control-label col-xs-4">{{ 'tab.cutlist.export.option_csv_encoding'|i18next }}</label>
                    <div class="col-xs-6">
                        <select class="form-control" id="ladb_cutlist_export_select_csv_encoding">
                            <option value="0" data-content="UTF-8">0</option>
                            <option value="1" data-content="UTF-16LE">1</option>
                            <option value="2" data-content="UTF-16BE">2</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footerRightInner %}
    <button class="btn btn-default" data-dismiss="modal">{{ 'default.cancel'|i18next }}</button>
    <button class="btn btn-default" id="ladb_cutlist_export_btn_preview">{{ 'default.preview'|i18next }}</button>
    <div class="btn-group dropup">
        <button type="button" class="btn btn-primary" id="ladb_cutlist_export_btn_export">{{ 'default.export'|i18next }}&nbsp;<i class="ladb-opencutlist-icon-arrow-right"></i>&nbsp;<span id="ladb_cutlist_export_btn_export_format"></span></button>
        <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li><a id="ladb_cutlist_export_btn_export_csv" href="#">{{ 'default.export'|i18next }}&nbsp;<i class="ladb-opencutlist-icon-arrow-right"></i>&nbsp;CSV</a></li>
            <li><a id="ladb_cutlist_export_btn_export_xlsx" href="#">{{ 'default.export'|i18next }}&nbsp;<i class="ladb-opencutlist-icon-arrow-right"></i>&nbsp;XLSX</a></li>
            <li role="separator" class="divider"></li>
            <li><a id="ladb_cutlist_export_btn_export_copy_all" href="#">{{ 'default.copy'|i18next }}&nbsp;<i class="ladb-opencutlist-icon-arrow-right"></i>&nbsp;{{ 'tab.cutlist.export.copy_all'|i18next }}</a></li>
            <li><a id="ladb_cutlist_export_btn_export_copy_values" href="#">{{ 'default.copy'|i18next }}&nbsp;<i class="ladb-opencutlist-icon-arrow-right"></i>&nbsp;{{ 'tab.cutlist.export.copy_values'|i18next }}</a></li>
        </ul>
    </div>
{% endblock %}